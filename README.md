# Сервис-ориентированная архитектура

## Лабораторная работа №1

Вариант №8403

### Задание:

Разработать спецификацию в формате OpenAPI для набора веб-сервисов, реализующего следующую функциональность:

**Первый веб-сервис** должен осуществлять управление коллекцией объектов. В коллекции необходимо хранить объекты класса `City`, описание которого приведено ниже:
```java
public class City {
private long id; //Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
private String name; //Поле не может быть null, Строка не может быть пустой
private Coordinates coordinates; //Поле не может быть null
private java.util.Date creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
private Integer area; //Значение поля должно быть больше 0, Поле не может быть null
private Integer population; //Значение поля должно быть больше 0, Поле не может быть null
private Double metersAboveSeaLevel;
private Boolean capital; //Поле не может быть null
private Climate climate; //Поле может быть null
private StandardOfLiving standardOfLiving; //Поле не может быть null
private Human governor; //Поле не может быть null
}
public class Coordinates {
private double x; //Максимальное значение поля: 329
private long y; //Значение поля должно быть больше -663
}
public class Human {
private int age; //Значение поля должно быть больше 0
}
public enum Climate {
TROPICAL_SAVANNA,
STEPPE,
SUBARCTIC,
POLAR_ICECAP;
}
public enum StandardOfLiving {
HIGH,
VERY_LOW,
ULTRA_LOW;
}
```
Веб-сервис должен удовлетворять следующим требованиям:

- API, реализуемый сервисом, должен соответствовать рекомендациям подхода RESTful.
- Необходимо реализовать следующий базовый набор операций с объектами коллекции: добавление нового элемента, получение элемента по ИД, обновление элемента, удаление элемента, получение массива элементов.
- Операция, выполняемая над объектом коллекции, должна определяться методом HTTP-запроса.
- Операция получения массива элементов должна поддерживать возможность сортировки и фильтрации по любой комбинации полей класса, а также возможность постраничного вывода результатов выборки с указанием размера и порядкового номера выводимой страницы.
- Все параметры, необходимые для выполнения операции, должны передаваться в URL запроса.
- Информация об объектах коллекции должна передаваться в формате json.
- В случае передачи сервису данных, нарушающих заданные на уровне класса ограничения целостности, сервис должен возвращать код ответа http, соответствующий произошедшей ошибке.

Помимо базового набора, веб-сервис должен поддерживать следующие операции над объектами коллекции:

- Удалить все объекты, значение поля governor которого эквивалентно заданному.
- Вернуть один (любой) объект, значение поля coordinates которого является минимальным.
- Вернуть количество объектов, значение поля climate которых равно заданному.

Эти операции должны размещаться на отдельных URL.

**Второй веб-сервис** должен располагаться на URL `/genocide`, и реализовывать ряд дополнительных операций, связанных с вызовом API первого сервиса:

`/kill/{id}` : уничтожить всё население города с заданным id
`/move-to-poorest/{id}` : переселить всё население города с заданным id в город с наименьшим уровнем жизни
Эти операции также должны размещаться на отдельных URL.

Для разработанной спецификации необходимо сгенерировать интерактивную веб-документацию с помощью Swagger UI. Документация должна содержать описание всех REST API обоих сервисов с текстовым описанием функциональности каждой операции. Созданную веб-документацию необходимо развернуть на сервере helios.

**Вопросы к защите лабораторной работы:**

1. Подходы к проектированию приложений. "Монолитная" и сервис-ориентированная архитектура.
2. Понятие сервиса. Общие свойства сервисов. 
3. Основные принципы SOA. Подходы к реализации SOA, стандарты и протоколы. 
4. Общие принципы построения и элементы сервис-ориентированных систем. 
5. Понятие веб-сервиса. Определение, особенности, отличия от веб-приложений. 
6. Категоризация веб-сервисов. RESTful и SOAP. Сходства и отличия, области применения. 
7. RESTful веб-сервисы. Особенности подхода. Понятия ресурса, URI и полезной нагрузки (payload). 
8. Виды RESTful-сервисов. Интерпретация методов HTTP в RESTful. 
9. Правила именования ресурсов в RESTful сервисах. 
10. Спецификация RESTful-сервисов. Стандарт OpenAPI. 
11. Автодокументирование RESTful-сервисов. Swagger Editor, Swagger UI (и Swagger Codegen). 
12. Архитектурный принцип HATEOAS.